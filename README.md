
# WafBook CN  
Thomas Nagy

建立了一个QQ群, 欢迎大家来交流 : WAF Build System讨论交流 54669543

### 引言
----
Copyright © 2010-2016 Thomas Nagy
Copies of this book may be redistributed, verbatim, and for non-commercial purposes. The license for this book is by-nc-nd license.

#### 关于生成系统
随着软件越来越复杂，功能越来越丰富，创建软件所需的过程也越来越多。复杂性的增加自然来自项目的基本需求。  
1. 可用的软件(程序)是机器可读的但通常不是人类可读的。  
2. 因此，被称为源代码的人类可读的输入数据被编译器或归档器转换为可分发的软件。  
3. 源代码通常被分解为互相依赖的单元例如文件，模块，类和函数。  
4. 这些单元随着时间的版本演变是通过版本控制软件管理的。  
5. 其他程序由源代码生成附加数据如测试结果及静态分析结果。  
6. 源代码的处理过程耗时而且容易出错所以通过其他软件帮助其自动化。  

虽然有时编译器有时会提供完全自动的生成，但他们通常仅限于非常特别的功能上。例如，Java编译器（javac）能够一次生成整个源码树，但另一种编译器需要生成归档文件（jar）。文本编辑器和集成开发环境（IDE如Xcode或Eclipse）能够提供自动生成功能，但是他们这样的用户界面最适合的工作是编写软件而不是运行生成。版本控制系统例如Git最适合管理终端用户的文件，但通常不适合调用编译器或者运行脚本。虽然解决方案集成系统（Jenkins, Teamcity）有时被理解为生成系统，但他们通常无法独立生成软件。他们需要生成脚本以及运行在他们生成代理（build agents Maven, Make, 等等）上的生成软件。  

因此我们认为生成软件是软件开发过程中一个独特的活动，需要独特的工具。术语“生成系统”通常用于表示这样的软件，并且我认为这里有两种定义应该被区分：  
A.帮助软件项目自动化处理的软件专注于源代码的处理。  
B.处理特定软件项目所需的工具集合：编译器，生成脚本，编配软件，版本控制系统，等等。  

本篇文档其余部分Waf使用第一个定义。

#### Waf框架  
生成系统通常会绑定到他们所属的特定框架上。例如，Visual Studio项目一般需要MSBuild而Angular.js项目一般需要Npm。这些解决方案通常专注于特殊的特性而且通常在处理其他语言或不同项目时会受到限制。例如，Ant比Make更加适合Java项目，但是在生成简单的c项目时Ant比Make更加复杂。由于编程语言和解决方案的不断发展，创造一个适合所有的理想生成系统是不可能的，所以要在框架的专业化和通用化之间权衡。  

这里还有一些生成系统旨在解决的常见问题：
* 区分编译器和脚本的处理流程
* 仅在记录“有改变”的情况下进行处理
* 并行处理提高效率
* 使软件测试更加方便如配置测试
* 为典型的编译器和工具提供支持

Waf提供的功能满足了插件式的随时使用，并且提供了一个必要时扩展其功能的框架。与其他框架相比主要区别在于他的设计：
1. Waf只需要Python支持，没有对其他软件或库的依赖。
2. Waf没有定义一种新的语言，它完全使用可重用的Python模块。
3. Waf不需要依赖代码生成器(Makefiles)实现高效率和可扩展的生成
4. Waf的目标为定义一个关注于从运行命令过程中分离出定义目标过程的对象
